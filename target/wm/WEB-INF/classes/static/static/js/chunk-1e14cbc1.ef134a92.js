(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e14cbc1"],{"17fa":function(e,t,r){},"230b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-form",{attrs:{inline:"",model:e.searchForm}},[r("el-form-item",{attrs:{label:"年度","label-width":"70px"}},[r("select-year",{on:{change:e.handleChangeYear}})],1),e._v(" "),r("el-form-item",{attrs:{label:"任务类型","label-width":"80px"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.task_type,callback:function(t){e.$set(e.searchForm,"task_type",t)},expression:"searchForm.task_type"}},e._l(e.typeOptions,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"任务状态","label-width":"80px"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.search}},[r("i",{staticClass:"el-icon-search"}),e._v("搜索")])],1)],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.productionData}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{label:"任务年份",prop:"task_year"}}),e._v(" "),r("el-table-column",{attrs:{label:"任务名称",prop:"task_name"}}),e._v(" "),r("el-table-column",{attrs:{label:"任务类型",prop:"task_type"}}),e._v(" "),r("el-table-column",{attrs:{label:"图书名称",prop:"task_class_tag"}}),e._v(" "),r("el-table-column",{attrs:{label:"添印/改版",prop:"task_type_content"}}),e._v(" "),r("el-table-column",{attrs:{label:"下达时间",prop:"task_start_date",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"进厂时间",prop:"task_print_date",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"详情",prop:"task_remark"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态",prop:"task_state"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:function(r){return e.viewThis(t.row)}}},[e._v("表单详情")]),e._v(" "),r("el-link",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(r){return e.submitThis(t.row)}}},[e._v("任务信息")]),e._v(" "),r("el-link",{attrs:{type:"primary",icon:"el-icon-s-promotion"},on:{click:function(r){return e.sendThis(t.row)}}},[e._v("发送")])]}}])})],1),e._v(" "),r("pagination",{attrs:{"current-page":e.page.current,"page-size":10,total:e.page.total},on:{"page-change":e.handleCurrentChange}}),e._v(" "),r("el-dialog",{attrs:{title:"表单详情",visible:e.detailVisible,width:"800px","close-on-click-modal":!1,"before-close":e.beforeDialogClose},on:{"update:visible":function(t){e.detailVisible=t}}},[r("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleFormClick},model:{value:e.formName,callback:function(t){e.formName=t},expression:"formName"}},[r("el-tab-pane",{attrs:{label:"表单详情",name:"tasksubmit"}},["制图任务"===e.currentType||"应急保障任务"===e.currentType?r("div",[r("h3",[e._v("人员与工天分配")]),e._v(" "),r("el-form",{ref:"mapruleForm",attrs:{model:e.addForm,rules:e.mapFormRules}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{attrs:{label:"产品类型","label-width":"80px",prop:"distribution_type"}},[r("el-radio-group",{on:{change:e.distributionTypeChange},model:{value:e.addForm.distribution_type,callback:function(t){e.$set(e.addForm,"distribution_type",t)},expression:"addForm.distribution_type"}},e._l(e.chartProductType,(function(t){return r("el-radio",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"作业过程","label-width":"80px",prop:"user_duty"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.user_duty,callback:function(t){e.$set(e.addForm,"user_duty",t)},expression:"addForm.user_duty"}},e._l(e.dutyOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"人员","label-width":"80px",prop:"user_id"}},[r("el-select",{ref:"userSelect",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm.user_id,callback:function(t){e.$set(e.addForm,"user_id",t)},expression:"addForm.user_id"}},e._l(e.userOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30 input-number",attrs:{label:"工天","label-width":"80px",prop:"work_days"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addForm.work_days,callback:function(t){e.$set(e.addForm,"work_days",t)},expression:"addForm.work_days"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"开始时间","label-width":"80px",prop:"start_date"}},[r("el-date-picker",{staticClass:"mapDatePicker",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.addForm.start_date,callback:function(t){e.$set(e.addForm,"start_date",t)},expression:"addForm.start_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"结束时间","label-width":"80px",prop:"end_date"}},[r("el-date-picker",{staticClass:"mapDatePicker",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.addForm.end_date,callback:function(t){e.$set(e.addForm,"end_date",t)},expression:"addForm.end_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"","label-width":"30px"}},[r("span",{staticClass:"pointer c-blue",on:{click:e.addDistribute}},[r("i",{staticClass:"el-icon-circle-plus-outline"})])])],1)]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.haitutableData}},[r("el-table-column",{attrs:{label:"过程",prop:"user_duty"}}),e._v(" "),r("el-table-column",{attrs:{label:"人员",prop:"user_name"}}),e._v(" "),r("el-table-column",{attrs:{label:"工天",prop:"work_days"}}),e._v(" "),r("el-table-column",{attrs:{label:"开始时间",prop:"start_date"}}),e._v(" "),r("el-table-column",{attrs:{label:"结束时间",prop:"end_date"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-edit-outline pointer",on:{click:function(r){return e.editMap(t.row)}}}),e._v(" "),r("i",{staticClass:"el-icon-remove-outline pointer",on:{click:function(r){return e.deleteMap(t.row)}}}),e._v(" "),"组校"===t.row.user_duty||"校对"===t.row.user_duty||"编辑审查"===t.row.user_duty?r("i",{staticClass:"el-icon-edit pointer",on:{click:function(r){return e.addErrormap(t.row)}}}):e._e()]}}],null,!1,3928276662)})],1)],1):e._e(),e._v(" "),"制图任务"!==e.currentType&&"应急保障任务"!==e.currentType?r("div",[r("el-form",{ref:"bookruleForm",attrs:{model:e.addForm2,rules:e.bookFormRules}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"图书名称","label-width":"80px",prop:"data_name"}},[r("el-input",{attrs:{disabled:""},model:{value:e.addForm2.data_name,callback:function(t){e.$set(e.addForm2,"data_name",t)},expression:"addForm2.data_name"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"章节数目","label-width":"80px",prop:"distribution_type"}},[r("el-input",{model:{value:e.addForm2.distribution_type,callback:function(t){e.$set(e.addForm2,"distribution_type",t)},expression:"addForm2.distribution_type"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"作业过程","label-width":"80px",prop:"user_duty"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm2.user_duty,callback:function(t){e.$set(e.addForm2,"user_duty",t)},expression:"addForm2.user_duty"}},e._l(e.dutyBookOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"人员","label-width":"80px",prop:"user_id"}},[r("el-select",{ref:"userBookSelect",attrs:{size:"small",placeholder:"请选择"},model:{value:e.addForm2.user_id,callback:function(t){e.$set(e.addForm2,"user_id",t)},expression:"addForm2.user_id"}},e._l(e.userOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30 input-number",attrs:{label:"工天","label-width":"80px",prop:"work_days"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addForm2.work_days,callback:function(t){e.$set(e.addForm2,"work_days",t)},expression:"addForm2.work_days"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"开始时间","label-width":"80px",prop:"start_date"}},[r("el-date-picker",{staticClass:"mapDatePicker",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.addForm2.start_date,callback:function(t){e.$set(e.addForm2,"start_date",t)},expression:"addForm2.start_date"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"结束时间","label-width":"80px",prop:"end_date"}},[r("el-date-picker",{staticClass:"mapDatePicker",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.addForm2.end_date,callback:function(t){e.$set(e.addForm2,"end_date",t)},expression:"addForm2.end_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"","label-width":"30px"}},[r("span",{staticClass:"pointer c-blue",on:{click:e.addBookDistribute}},[r("i",{staticClass:"el-icon-circle-plus-outline"})])])],1)]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.booktableData}},[r("el-table-column",{attrs:{label:"过程",prop:"user_duty"}}),e._v(" "),r("el-table-column",{attrs:{label:"人员",prop:"user_name"}}),e._v(" "),r("el-table-column",{attrs:{label:"工天",prop:"work_days"}}),e._v(" "),r("el-table-column",{attrs:{label:"开始时间",prop:"start_date"}}),e._v(" "),r("el-table-column",{attrs:{label:"结束时间",prop:"end_date"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-edit-outline pointer",on:{click:function(r){return e.editBook(t.row)}}}),e._v(" "),r("i",{staticClass:"el-icon-remove-outline pointer",on:{click:function(r){return e.deleteBook(t.row)}}}),e._v(" "),"组校"===t.row.user_duty||"校对"===t.row.user_duty||"编辑审查"===t.row.user_duty?r("i",{staticClass:"el-icon-edit pointer",on:{click:function(r){return e.addErrorbook(t.row)}}}):e._e()]}}],null,!1,2400984707)})],1)],1):e._e()]),e._v(" "),r("el-tab-pane",{attrs:{label:"书号/CIP号申请",name:"applycation"}},[r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleForm3Click},model:{value:e.form3Name,callback:function(t){e.form3Name=t},expression:"form3Name"}},[r("el-tab-pane",{attrs:{label:"书号申请",name:"bookapplycation"}},[r("el-form",{ref:"bookApplyForm",staticClass:"clearfix",attrs:{model:e.bookApplyForm,rules:e.bookApplyFormRules}},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"书名","label-width":"90px",prop:"book_name"}},[r("el-input",{model:{value:e.bookApplyForm.book_name,callback:function(t){e.$set(e.bookApplyForm,"book_name",t)},expression:"bookApplyForm.book_name"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"选题号","label-width":"90px",prop:"book_code"}},[r("el-input",{model:{value:e.bookApplyForm.book_code,callback:function(t){e.$set(e.bookApplyForm,"book_code",t)},expression:"bookApplyForm.book_code"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"标准书号","label-width":"90px",prop:"book_standard_code"}},[r("el-input",{model:{value:e.bookApplyForm.book_standard_code,callback:function(t){e.$set(e.bookApplyForm,"book_standard_code",t)},expression:"bookApplyForm.book_standard_code"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 unitForm",attrs:{label:"单位及职务名称","label-width":"90px",prop:"book_unit_post"}},[r("el-input",{model:{value:e.bookApplyForm.book_unit_post,callback:function(t){e.$set(e.bookApplyForm,"book_unit_post",t)},expression:"bookApplyForm.book_unit_post"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"责任编辑","label-width":"90px",prop:"book_edit"}},[r("el-input",{model:{value:e.bookApplyForm.book_edit,callback:function(t){e.$set(e.bookApplyForm,"book_edit",t)},expression:"bookApplyForm.book_edit"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"职务职称","label-width":"90px",prop:"book_post_title"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.bookApplyForm.book_post_title,callback:function(t){e.$set(e.bookApplyForm,"book_post_title",t)},expression:"bookApplyForm.book_post_title"}},e._l(e.zcOptions,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"军审号","label-width":"90px",prop:"book_jcode"}},[r("el-input",{model:{value:e.bookApplyForm.book_jcode,callback:function(t){e.$set(e.bookApplyForm,"book_jcode",t)},expression:"bookApplyForm.book_jcode"}})],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{label:"CIP申请",name:"cipapplycation"}},[r("el-form",{ref:"cipApplyForm",staticClass:"clearfix",attrs:{model:e.cipApplyForm,rules:e.cipApplyFormRules}},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"正书名","label-width":"90px",prop:"book_name"}},[r("el-input",{model:{value:e.cipApplyForm.book_name,callback:function(t){e.$set(e.cipApplyForm,"book_name",t)},expression:"cipApplyForm.book_name"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"版次","label-width":"90px",prop:"book_edition"}},[r("el-input",{model:{value:e.cipApplyForm.book_edition,callback:function(t){e.$set(e.cipApplyForm,"book_edition",t)},expression:"cipApplyForm.book_edition"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"印次","label-width":"90px",prop:"book_impression"}},[r("el-input",{model:{value:e.cipApplyForm.book_impression,callback:function(t){e.$set(e.cipApplyForm,"book_impression",t)},expression:"cipApplyForm.book_impression"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"副书名","label-width":"90px",prop:"book_describe"}},[r("el-input",{model:{value:e.cipApplyForm.book_describe,callback:function(t){e.$set(e.cipApplyForm,"book_describe",t)},expression:"cipApplyForm.book_describe"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"责任编辑","label-width":"90px",prop:"book_edit"}},[r("el-input",{model:{value:e.cipApplyForm.book_edit,callback:function(t){e.$set(e.cipApplyForm,"book_edit",t)},expression:"cipApplyForm.book_edit"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"印数","label-width":"90px",prop:"book_impression_count"}},[r("el-input",{model:{value:e.cipApplyForm.book_impression_count,callback:function(t){e.$set(e.cipApplyForm,"book_impression_count",t)},expression:"cipApplyForm.book_impression_count"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"出版年月","label-width":"90px",prop:"book_publish"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2 mapDatePicker3",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.cipApplyForm.book_publish,callback:function(t){e.$set(e.cipApplyForm,"book_publish",t)},expression:"cipApplyForm.book_publish"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"军审号","label-width":"90px",prop:"book_jcode"}},[r("el-input",{model:{value:e.cipApplyForm.book_jcode,callback:function(t){e.$set(e.cipApplyForm,"book_jcode",t)},expression:"cipApplyForm.book_jcode"}})],1)],1)],1)],1)],1)],1),e._v(" "),"applycation"===e.formName?r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.submitApply}},[e._v("提  交")])],1):e._e()],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑海图",visible:e.editMapVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.editMapVisible=t}}},[r("el-form",{ref:"editMapForm",staticClass:"clearfix",attrs:{model:e.editMapForm,rules:e.editmapFormRules}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"作业过程","label-width":"80px",prop:"user_duty"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.editMapForm.user_duty,callback:function(t){e.$set(e.editMapForm,"user_duty",t)},expression:"editMapForm.user_duty"}},e._l(e.dutyOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"人员","label-width":"80px",prop:"user_id"}},[r("el-select",{ref:"usereditSelect",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editMapForm.user_id,callback:function(t){e.$set(e.editMapForm,"user_id",t)},expression:"editMapForm.user_id"}},e._l(e.userOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 input-number",attrs:{label:"工天","label-width":"80px",prop:"work_days"}},[r("el-input",{attrs:{type:"number"},model:{value:e.editMapForm.work_days,callback:function(t){e.$set(e.editMapForm,"work_days",t)},expression:"editMapForm.work_days"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"开始时间","label-width":"80px",prop:"start_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.editMapForm.start_date,callback:function(t){e.$set(e.editMapForm,"start_date",t)},expression:"editMapForm.start_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"结束时间","label-width":"80px",prop:"end_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.editMapForm.end_date,callback:function(t){e.$set(e.editMapForm,"end_date",t)},expression:"editMapForm.end_date"}})],1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.editMapVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.confirmEditMap}},[e._v("确  定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑书表",visible:e.editBookVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.editBookVisible=t}}},[r("el-form",{ref:"editBookForm",staticClass:"clearfix",attrs:{model:e.editBookForm,rules:e.editbookFormRules}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"作业过程","label-width":"80px",prop:"user_duty"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.editBookForm.user_duty,callback:function(t){e.$set(e.editBookForm,"user_duty",t)},expression:"editBookForm.user_duty"}},e._l(e.dutyOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"人员","label-width":"80px",prop:"user_id"}},[r("el-select",{ref:"usereditSelect2",attrs:{size:"small",placeholder:"请选择"},model:{value:e.editBookForm.user_id,callback:function(t){e.$set(e.editBookForm,"user_id",t)},expression:"editBookForm.user_id"}},e._l(e.userOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 input-number",attrs:{label:"工天","label-width":"80px",prop:"work_days"}},[r("el-input",{attrs:{type:"number"},model:{value:e.editBookForm.work_days,callback:function(t){e.$set(e.editBookForm,"work_days",t)},expression:"editBookForm.work_days"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30",attrs:{label:"开始时间","label-width":"80px",prop:"start_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.editBookForm.start_date,callback:function(t){e.$set(e.editBookForm,"start_date",t)},expression:"editBookForm.start_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30",attrs:{label:"结束时间","label-width":"80px",prop:"end_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.editBookForm.end_date,callback:function(t){e.$set(e.editBookForm,"end_date",t)},expression:"editBookForm.end_date"}})],1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.editBookVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.confirmEditBook}},[e._v("确  定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加错漏信息",visible:e.addMapErrorVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addMapErrorVisible=t}}},[r("el-form",{ref:"addErrorForm",staticClass:"clearfix",attrs:{model:e.addErrorForm,rules:e.errorFormRules1}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"严重缺陷","label-width":"170px",prop:"check_error1"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm.check_error1,callback:function(t){e.$set(e.addErrorForm,"check_error1",t)},expression:"addErrorForm.check_error1"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"一般缺陷","label-width":"170px",prop:"check_error3"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm.check_error3,callback:function(t){e.$set(e.addErrorForm,"check_error3",t)},expression:"addErrorForm.check_error3"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"轻微缺陷","label-width":"170px",prop:"check_error4"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm.check_error4,callback:function(t){e.$set(e.addErrorForm,"check_error4",t)},expression:"addErrorForm.check_error4"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"发现只能评不合格错误","label-width":"170px",prop:"check_lost"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm.check_lost,callback:function(t){e.$set(e.addErrorForm,"check_lost",t)},expression:"addErrorForm.check_lost"}},e._l(e.checklostOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"只计入本级缺陷值","label-width":"170px",prop:"check_mylevel"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm.check_mylevel,callback:function(t){e.$set(e.addErrorForm,"check_mylevel",t)},expression:"addErrorForm.check_mylevel"}},e._l(e.checklostOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"图幅质量","label-width":"170px",prop:"check_mapquality"}},[r("el-input",{model:{value:e.addErrorForm.check_mapquality,callback:function(t){e.$set(e.addErrorForm,"check_mapquality",t)},expression:"addErrorForm.check_mapquality"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"图历表审查","label-width":"170px",prop:"check_maptable"}},[r("el-input",{model:{value:e.addErrorForm.check_maptable,callback:function(t){e.$set(e.addErrorForm,"check_maptable",t)},expression:"addErrorForm.check_maptable"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"分配内容","label-width":"170px",prop:"distribution_type"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm.distribution_type,callback:function(t){e.$set(e.addErrorForm,"distribution_type",t)},expression:"addErrorForm.distribution_type"}},e._l(e.distributionTypeOptions,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.addMapErrorVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.confirmAddErrorMap}},[e._v("确  定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加错漏信息",visible:e.addBookErrorVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.addBookErrorVisible=t}}},[r("el-form",{ref:"addErrorForm2",staticClass:"clearfix",attrs:{model:e.addErrorForm2,rules:e.errorFormRules2}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"严重缺陷","label-width":"170px",prop:"check_error1"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm2.check_error1,callback:function(t){e.$set(e.addErrorForm2,"check_error1",t)},expression:"addErrorForm2.check_error1"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"较重缺陷","label-width":"170px",prop:"check_error2"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm2.check_error2,callback:function(t){e.$set(e.addErrorForm2,"check_error2",t)},expression:"addErrorForm2.check_error2"}})],1)],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"fl w45",attrs:{label:"一般缺陷","label-width":"170px",prop:"check_error3"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm2.check_error3,callback:function(t){e.$set(e.addErrorForm2,"check_error3",t)},expression:"addErrorForm2.check_error3"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"轻微缺陷","label-width":"170px",prop:"check_error4"}},[r("el-input",{attrs:{type:"number"},model:{value:e.addErrorForm2.check_error4,callback:function(t){e.$set(e.addErrorForm2,"check_error4",t)},expression:"addErrorForm2.check_error4"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"发现只能评不合格错误","label-width":"170px",prop:"check_lost"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm2.check_lost,callback:function(t){e.$set(e.addErrorForm2,"check_lost",t)},expression:"addErrorForm2.check_lost"}},e._l(e.checklostOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w45",attrs:{label:"只计入本级缺陷值","label-width":"170px",prop:"check_mylevel"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm2.check_mylevel,callback:function(t){e.$set(e.addErrorForm2,"check_mylevel",t)},expression:"addErrorForm2.check_mylevel"}},e._l(e.checklostOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w45",attrs:{label:"分配内容","label-width":"170px",prop:"distribution_type"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.addErrorForm2.distribution_type,callback:function(t){e.$set(e.addErrorForm2,"distribution_type",t)},expression:"addErrorForm2.distribution_type"}},e._l(e.sectionArr,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.addBookErrorVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.confirmAddErrorBook}},[e._v("确  定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"任务信息提交",visible:e.submitVisible,width:"800px","close-on-click-modal":!1},on:{"update:visible":function(t){e.submitVisible=t}}},[r("el-form",{ref:"submitForm",staticClass:"clearfix",attrs:{model:e.submitForm,rules:e.submitFormRules}},[r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"任务单号","label-width":"80px",prop:"task_code"}},[r("el-input",{model:{value:e.submitForm.task_code,callback:function(t){e.$set(e.submitForm,"task_code",t)},expression:"submitForm.task_code"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"下达时间","label-width":"80px",prop:"task_start_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2 mapDatePicker4",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.submitForm.task_start_date,callback:function(t){e.$set(e.submitForm,"task_start_date",t)},expression:"submitForm.task_start_date"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"完成期限","label-width":"80px",prop:"task_end_date"}},[r("el-date-picker",{staticClass:"mapDatePicker mapDatePicker2 mapDatePicker4",attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:e.submitForm.task_end_date,callback:function(t){e.$set(e.submitForm,"task_end_date",t)},expression:"submitForm.task_end_date"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"任务级别","label-width":"80px",prop:"task_level"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.submitForm.task_level,callback:function(t){e.$set(e.submitForm,"task_level",t)},expression:"submitForm.task_level"}},e._l(e.levelOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"任务类型","label-width":"80px",prop:"task_type_content"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.submitForm.task_type_content,callback:function(t){e.$set(e.submitForm,"task_type_content",t)},expression:"submitForm.task_type_content"}},e._l(e.taskTypeOptinos,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"任务量","label-width":"80px",prop:"task_days"}},[r("el-input",{model:{value:e.submitForm.task_days,callback:function(t){e.$set(e.submitForm,"task_days",t)},expression:"submitForm.task_days"}})],1)],1),e._v(" "),r("div",{staticClass:"clearfix"},[r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"任务名称","label-width":"80px",prop:"task_name"}},[r("el-input",{model:{value:e.submitForm.task_name,callback:function(t){e.$set(e.submitForm,"task_name",t)},expression:"submitForm.task_name"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"工作内容","label-width":"80px",prop:"task_content"}},[r("el-input",{model:{value:e.submitForm.task_content,callback:function(t){e.$set(e.submitForm,"task_content",t)},expression:"submitForm.task_content"}})],1),e._v(" "),r("el-form-item",{staticClass:"fl w30 wz30",attrs:{label:"备注","label-width":"80px",prop:"task_remark"}},[r("el-input",{model:{value:e.submitForm.task_remark,callback:function(t){e.$set(e.submitForm,"task_remark",t)},expression:"submitForm.task_remark"}})],1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.submitVisible=!1}}},[e._v("关  闭")]),e._v(" "),r("el-button",{staticClass:"fr confirm-btn",attrs:{type:"primary"},on:{click:e.confirmSubmit}},[e._v("确  定")])],1)],1)],1)},o=[],s=(r("d91d"),r("e680"),r("1bc7"),r("32ea"),r("a450"),r("f0dd")),i=r("6797"),l=r("b199"),d=r("857b"),c=r("18ed"),n=r("3641"),m={components:{SelectYear:c["a"],Pagination:n["a"]},data:function(){return{searchForm:{task_year:"",task_type:"",status:""},typeOptions:[],statusOptions:[],productionData:[],chartProductType:[],page:{current:1,total:1},detailVisible:!1,formName:"tasksubmit",currentType:"",form3Name:"bookapplycation",addForm:{distribution_type:"纸图",user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},taskContentOptions:[],distributionTypeOptions:["纸图","数字图","S57图","EPS","图集插图"],distributionTypeBookOptions:["第一章"],dutyOptinos:[],dutyBookOptinos:[],userOptions:[],mapInfor:{currentCodeId:"",currentCodeName:"",currentDeptId:"",currentIndexId:""},editMapVisible:!1,editMapForm:{user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},editBookVisible:!1,editBookForm:{user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},checklostOptions:[{value:1,label:"是"},{value:0,label:"否"}],addMapErrorVisible:!1,addErrorForm:{check_error1:0,check_error3:0,check_error4:0,check_lost:0,check_mapquality:0,check_maptable:0,check_mylevel:0,distribution_type:"纸图"},addForm2:{data_name:"",distribution_type:"",user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},haitutableData:[],booktableData:[],zcOptions:[],bookApplyForm:{book_code:"",book_edit:"",book_jcode:"",book_name:"",book_post_title:"",book_standard_code:"",book_unit_post:"",form_id:"",remark:"",task_index_id:""},cipApplyForm:{book_describe:"",book_edit:"",book_edition:"",book_impression:"",book_impression_count:"",book_jcode:"",book_name:"",book_publish:"",task_index_id:"",book_data_id:""},addBookErrorVisible:!1,addErrorForm2:{check_error1:0,check_error2:0,check_error3:0,check_error4:0,check_lost:0,check_mylevel:0,distribution_type:""},mapFormRules:{distribution_type:[{required:!0,message:"请选择产品类型",trigger:"change"}],user_duty:[{required:!0,message:"请选择作业过程",trigger:"blur"}],user_id:[{required:!0,message:"请选择人员",trigger:"blur"}],work_days:[{required:!0,message:"请输入工天",trigger:"blur"}],start_date:[{required:!0,message:"请选择开始时间",trigger:"blur"}],end_date:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},bookFormRules:{distribution_type:[{required:!0,message:"请输入章节数目",trigger:"blur"}],data_name:[{required:!0,message:"请输入图书名称",trigger:"blur"}],user_duty:[{required:!0,message:"请选择作业过程",trigger:"blur"}],user_id:[{required:!0,message:"请选择人员",trigger:"blur"}],work_days:[{required:!0,message:"请输入工天",trigger:"blur"}],start_date:[{required:!0,message:"请选择开始时间",trigger:"blur"}],end_date:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},bookApplyFormRules:{book_name:[{required:!0,message:"请输入书名",trigger:"blur"}],book_code:[{required:!0,message:"请输入选题号",trigger:"blur"}],book_standard_code:[{required:!0,message:"请输入标准书号",trigger:"change"}],book_unit_post:[{required:!0,message:"请输入单位及职务名称",trigger:"change"}],book_edit:[{required:!0,message:"请输入责任编辑",trigger:"blur"}],book_post_title:[{required:!0,message:"请选择职务职称",trigger:"change"}],book_jcode:[{required:!0,message:"请输入军审号",trigger:"change"}]},cipApplyFormRules:{book_name:[{required:!0,message:"请输入正书名",trigger:"blur"}],book_edition:[{required:!0,message:"请输入版次",trigger:"change"}],book_impression:[{required:!0,message:"请输入印次",trigger:"change"}],book_describe:[{required:!0,message:"请输入副书名",trigger:"blur"}],book_edit:[{required:!0,message:"请输入责任编辑",trigger:"change"}],book_impression_count:[{required:!0,message:"请输入印数",trigger:"change"}],book_publish:[{required:!0,message:"请选择出版年月",trigger:"change"}],book_jcode:[{required:!0,message:"请输入军审号",trigger:"change"}]},submitVisible:!1,submitForm:{task_code:"",task_start_date:"",task_end_date:"",task_level:"",task_type_content:"",task_days:"",task_name:"",task_content:"",task_remark:""},levelOptinos:["正常","快速","紧急"],taskTypeOptinos:["新增","改版","添印","科研"],submitFormRules:{task_start_date:[{required:!0,message:"请选择下达时间",trigger:"change"}],task_name:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},editmapFormRules:{user_duty:[{required:!0,message:"请选择作业过程",trigger:"change"}],user_id:[{required:!0,message:"请选择人员",trigger:"change"}],work_days:[{required:!0,message:"请输入工天",trigger:"blur"}],start_date:[{required:!0,message:"请选择开始时间",trigger:"change"}],end_date:[{required:!0,message:"请选择结束时间",trigger:"change"}]},editbookFormRules:{user_duty:[{required:!0,message:"请选择作业过程",trigger:"change"}],user_id:[{required:!0,message:"请选择人员",trigger:"change"}],work_days:[{required:!0,message:"请输入工天",trigger:"blur"}],start_date:[{required:!0,message:"请选择开始时间",trigger:"change"}],end_date:[{required:!0,message:"请选择结束时间",trigger:"change"}]},currentInforId:"",taskIndexid:"",errorFormRules1:{check_error1:[{required:!0,message:"请输入严重缺陷",trigger:"blur"}],check_error3:[{required:!0,message:"请输入一般缺陷",trigger:"blur"}],check_error4:[{required:!0,message:"请输入轻微缺陷",trigger:"blur"}],check_lost:[{required:!0,message:"请选择发现只能评不合格错误",trigger:"blur"}],check_mylevel:[{required:!0,message:"请选择只计入本级缺陷值",trigger:"blur"}],check_mapquality:[{required:!0,message:"请输入图幅质量",trigger:"blur"}],check_maptable:[{required:!0,message:"请输入图例表审查",trigger:"blur"}],distribution_type:[{required:!0,message:"请选择分配内容",trigger:"blur"}]},sectionArr:[],errorFormRules2:{check_error1:[{required:!0,message:"请输入严重缺陷",trigger:"blur"}],check_error3:[{required:!0,message:"请输入一般缺陷",trigger:"blur"}],check_error4:[{required:!0,message:"请输入轻微缺陷",trigger:"blur"}],check_lost:[{required:!0,message:"请选择发现只能评不合格错误",trigger:"blur"}],check_mylevel:[{required:!0,message:"请选择只计入本级缺陷值",trigger:"blur"}],check_error2:[{required:!0,message:"请输入较重缺陷",trigger:"blur"}],distribution_type:[{required:!0,message:"请选择分配内容",trigger:"blur"}]}}},computed:{userInfo:function(){return this.$store.getters.userInfo}},mounted:function(){this.getTaskState(),this.fetchTableData(),this.getUserOptions(),this.getDutyOptions(),this.getData()},methods:{getData:function(){Object(d["f"])(this),this.getTypeOptions()},getTypeOptions:function(){var e=this;i["c"].getTaskType().then((function(t){e.typeOptions=t})).catch((function(e){console.log(e)}))},getTaskState:function(){var e=this;i["c"].getTaskState({use_type:1}).then((function(t){e.statusOptions=t})).catch((function(e){console.log(e)}))},getUserOptions:function(){var e=this;l["h"].selectdeptuser().then((function(t){for(var r=t.data.length,a=0;a<r;a++)e.userOptions.push({label:t.data[a].user_name,value:t.data[a].user_id})})).catch((function(e){console.log(e)}))},getDutyOptions:function(){var e=this;s["a"].getChartTaskType().then((function(t){e.dutyOptinos=t})).catch((function(e){console.log(e)}))},search:function(){var e=this,t=Object(d["e"])({page_number:1,page_size:10,task_year:this.searchForm.task_year,task_state:this.searchForm.status,task_type:this.searchForm.task_type});s["a"].selectdepttask(t).then((function(t){200===t.code?(e.productionData=t.data.smallList,e.page.total=t.data.recordCount,e.page.current=1):e.$message.error("获取数据失败！")})).catch((function(e){console.log(e)}))},fetchTableData:function(){var e=this,t={page_number:1,page_size:10};s["a"].selectdepttask(t).then((function(t){200===t.code?(e.productionData=t.data.smallList,e.page.total=t.data.recordCount):e.$message.error("获取数据失败！")})).catch((function(e){console.log(e)}))},handleChangeYear:function(e){this.searchForm.task_year=e},viewThis:function(e){var t=this;if(this.formName="tasksubmit",this.form3Name="bookapplycation",this.currentType=e.task_type,this.mapInfor.currentCodeId=e.data_code,this.mapInfor.currentCodeName=e.task_class_tag,this.mapInfor.currentDeptId=e.dept_id,this.mapInfor.currentIndexId=e.index_id,this.addForm2.data_name=e.data_code,this.detailVisible=!0,this.addForm={distribution_type:"纸图",user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},this.$nextTick((function(){void 0!==t.$refs["mapruleForm"]?t.$refs["mapruleForm"].clearValidate():t.$refs["bookruleForm"].clearValidate()})),"制图任务"!==this.currentType&&"应急保障任务"!==this.currentType){this.addForm2={data_name:e.data_code,distribution_type:"",user_duty:"",user_id:"",work_days:"",start_date:"",end_date:""},s["a"].getBookTaskType().then((function(e){t.dutyBookOptinos=e})).catch((function(e){console.log(e)}));var r={task_index_id:e.index_id};l["g"].select(r).then((function(e){t.booktableData=e.data})).catch((function(e){console.log(e)}))}else{var a={task_index_id:e.index_id,distribution_type:this.addForm.distribution_type};l["g"].select(a).then((function(e){t.haitutableData=e.data})).catch((function(e){console.log(e)}))}},handleCurrentChange:function(e){var t=this;this.page.current=e;var r=Object(d["e"])({page_number:this.page.current,page_size:10,task_year:this.searchForm.task_year,task_state:this.searchForm.status});s["a"].selectdepttask(r).then((function(e){200===e.code?(t.productionData=e.data.smallList,t.page.total=e.data.recordCount):t.$message.error("获取数据失败！")})).catch((function(e){console.log(e)}))},handleFormClick:function(e){var t=this;"applycation"===e.name&&(this.$refs["bookApplyForm"].resetFields(),this.$refs["cipApplyForm"].resetFields(),i["c"].getUserZc().then((function(e){t.zcOptions=e})).then((function(){var e={task_index_id:t.mapInfor.currentIndexId};s["a"].getbookinfor(e).then((function(e){null!==e.data&&(t.bookApplyForm.book_code=e.data.book_code,t.bookApplyForm.book_edit=e.data.book_edit,t.bookApplyForm.book_jcode=e.data.book_jcode,t.bookApplyForm.book_name=e.data.book_name,t.bookApplyForm.book_post_title=e.data.book_post_title,t.bookApplyForm.book_standard_code=e.data.book_standard_code,t.bookApplyForm.book_unit_post=e.data.book_unit_post,t.bookApplyForm.remark=e.data.remark,t.bookApplyForm.form_id=e.data.form_id)})).catch((function(e){console.log(e)}))})))},handleForm3Click:function(e){var t=this;if("bookapplycation"===e.name){var r={task_index_id:this.mapInfor.currentIndexId};s["a"].getbookinfor(r).then((function(e){null!==e.data&&(t.bookApplyForm.book_code=e.data.book_code,t.bookApplyForm.book_edit=e.data.book_edit,t.bookApplyForm.book_jcode=e.data.book_jcode,t.bookApplyForm.book_name=e.data.book_name,t.bookApplyForm.book_post_title=e.data.book_post_title,t.bookApplyForm.book_standard_code=e.data.book_standard_code,t.bookApplyForm.book_unit_post=e.data.book_unit_post,t.bookApplyForm.remark=e.data.remark,t.bookApplyForm.form_id=e.data.form_id)})).catch((function(e){console.log(e)})),this.$nextTick((function(){t.$refs["bookApplyForm"].clearValidate()}))}else{var a={task_index_id:this.mapInfor.currentIndexId};s["a"].getcipinfor(a).then((function(e){null!==e.data&&(t.cipApplyForm.book_describe=e.data.book_describe?e.data.book_describe:"",t.cipApplyForm.book_edit=e.data.book_edit?e.data.book_edit:"",t.cipApplyForm.book_edition=e.data.book_edition?e.data.book_edition:"",t.cipApplyForm.book_impression=e.data.book_impression?e.data.book_impression:"",t.cipApplyForm.book_impression_count=e.data.book_impression_count?e.data.book_impression_count:"",t.cipApplyForm.book_jcode=e.data.book_jcode?e.data.book_jcode:"",t.cipApplyForm.book_name=e.data.book_name?e.data.book_name:"",t.cipApplyForm.book_publish=e.data.book_publish?e.data.book_publish:"",t.cipApplyForm.book_data_id=e.data.book_data_id?e.data.book_data_id:"")})).catch((function(e){console.log(e)})),this.$nextTick((function(){t.$refs["cipApplyForm"].clearValidate()}))}},addDistribute:function(){var e=this;this.$refs["mapruleForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(new Date(e.addForm.start_date).getTime()>new Date(e.addForm.end_date).getTime())e.$message.error("开始时间不能大于结束时间！");else{var r={data_code:e.mapInfor.currentCodeId,data_name:e.mapInfor.currentCodeName,dept_id:e.mapInfor.currentDeptId,distribution_type:e.addForm.distribution_type,end_date:e.formatDate(e.addForm.end_date),product_type:"海图",remark:"",start_date:e.formatDate(e.addForm.start_date),task_index_id:e.mapInfor.currentIndexId,user_duty:e.addForm.user_duty,user_id:e.addForm.user_id,user_name:e.$refs.userSelect.selectedLabel,work_days:e.addForm.work_days};l["g"].add(r).then((function(t){Object(d["i"])(e,t);var r={task_index_id:e.mapInfor.currentIndexId,distribution_type:e.addForm.distribution_type};l["g"].select(r).then((function(t){e.haitutableData=t.data})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}))},editMap:function(e){var t=this;this.editMapVisible=!0,this.editMapForm={data_code:e.data_code,data_name:e.data_name,dept_id:e.dept_id,distribution_id:e.distribution_id,distribution_type:e.distribution_type,product_type:e.product_type,remark:"",task_index_id:e.task_index_id,user_duty:e.user_duty,user_id:e.user_id,user_name:e.user_name,work_days:e.work_days,start_date:e.start_date,end_date:e.end_date},this.$nextTick((function(){t.$refs["editMapForm"].clearValidate()}))},confirmEditMap:function(){var e=this;this.$refs["editMapForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(new Date(e.editMapForm.start_date).getTime()>new Date(e.editMapForm.end_date).getTime())e.$message.error("开始时间不能大于结束时间！");else{var r=e.editMapForm;r.user_name=e.$refs.usereditSelect.selectedLabel,l["g"].update(r).then((function(t){if(Object(d["i"])(e,t),"success"===t.message){e.editMapVisible=!1;var r={task_index_id:e.mapInfor.currentIndexId,distribution_type:e.addForm.distribution_type};l["g"].select(r).then((function(t){e.haitutableData=t.data})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))}}))},deleteMap:function(e){var t=this;this.$confirm("确认删除？").then((function(r){l["g"].delete({distribution_id:e.distribution_id}).then((function(e){if(Object(d["i"])(t,e),"success"===e.message){var r={task_index_id:t.mapInfor.currentIndexId,distribution_type:t.addForm.distribution_type};l["g"].select(r).then((function(e){t.haitutableData=e.data})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))})).catch((function(e){}))},addErrormap:function(e){var t=this;console.log(e),this.addMapErrorVisible=!0;var r={distribution_id:e.distribution_id};this.addErrorForm.check_oper=e.user_name,this.addErrorForm.user_id=e.user_id,this.addErrorForm.task_id=e.task_index_id,l["c"].getTaskCheckByDisID(r).then((function(e){200===e.code?0===Object.keys(e.data).length?(t.addErrorForm.check_id="",t.addErrorForm.check_error1="",t.addErrorForm.check_error3="",t.addErrorForm.check_error4="",t.addErrorForm.check_lost="",t.addErrorForm.check_mapquality="",t.addErrorForm.check_maptable="",t.addErrorForm.check_mylevel="",t.addErrorForm.distribution_type="",t.addErrorForm.distribution_id=""):t.$nextTick((function(){void 0===e.data.check_error1||null===e.data.check_error1?t.addErrorForm.check_error1="":t.addErrorForm.check_error1=e.data.check_error1,void 0===e.data.check_error3||null===e.data.check_error3?t.addErrorForm.check_error3="":t.addErrorForm.check_error3=e.data.check_error3,void 0===e.data.check_error4||null===e.data.check_error4?t.addErrorForm.check_error4="":t.addErrorForm.check_error4=e.data.check_error4,void 0===e.data.check_lost||null===e.data.check_lost?t.addErrorForm.check_lost="":t.addErrorForm.check_lost=e.data.check_lost,void 0===e.data.check_mylevel||null===e.data.check_mylevel?t.addErrorForm.check_mylevel="":t.addErrorForm.check_mylevel=e.data.check_mylevel,void 0===e.data.check_mapquality||null===e.data.check_mapquality?t.addErrorForm.check_mapquality="":t.addErrorForm.check_mapquality=e.data.check_mapquality,void 0===e.data.check_maptable||null===e.data.check_maptable?t.addErrorForm.check_maptable="":t.addErrorForm.check_maptable=e.data.check_maptable,t.addErrorForm.distribution_type=e.data.distribution_type?e.data.distribution_type:"",t.addErrorForm.check_id=e.data.check_id,t.addErrorForm.distribution_id=e.data.distribution_id})):(t.$message.error(e.message),t.$nextTick((function(){t.addErrorForm.check_id="",t.addErrorForm.check_error1="",t.addErrorForm.check_error3="",t.addErrorForm.check_error4="",t.addErrorForm.check_lost="",t.addErrorForm.check_mapquality="",t.addErrorForm.check_maptable="",t.addErrorForm.check_mylevel="",t.addErrorForm.distribution_type="",t.addErrorForm.distribution_id=""})))})).catch((function(e){console.log(e)}))},confirmAddErrorMap:function(){var e=this;this.$refs["addErrorForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.addErrorForm.remark="";var r=e.addErrorForm;r.check_error1=Number(e.addErrorForm.check_error1),r.check_error3=Number(e.addErrorForm.check_error3),r.check_error4=Number(e.addErrorForm.check_error4),l["c"].updataTaskCheckByDisID(r).then((function(t){"success"===t.message?e.$message.success("更新成功！"):e.$message.error("更新失败！"),e.addMapErrorVisible=!1})).catch((function(e){console.log(e)}))}))},addBookDistribute:function(){var e=this;this.$refs["bookruleForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(new Date(e.addForm2.start_date).getTime()>new Date(e.addForm2.end_date).getTime())e.$message.error("开始时间不能大于结束时间！");else{var r={data_code:e.addForm2.data_name,data_name:e.mapInfor.currentCodeName,dept_id:e.mapInfor.currentDeptId,distribution_type:e.addForm2.distribution_type,end_date:e.formatDate(e.addForm2.end_date),product_type:"书表",remark:"",start_date:e.formatDate(e.addForm2.start_date),task_index_id:e.mapInfor.currentIndexId,user_duty:e.addForm2.user_duty,user_id:e.addForm2.user_id,user_name:e.$refs.userBookSelect.selectedLabel,work_days:e.addForm2.work_days};l["g"].add(r).then((function(t){Object(d["i"])(e,t);var r={task_index_id:e.mapInfor.currentIndexId};l["g"].select(r).then((function(t){e.booktableData=t.data})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}))},editBook:function(e){var t=this;this.editBookVisible=!0,this.editBookForm={data_code:e.data_code,data_name:e.data_name,dept_id:e.dept_id,distribution_id:e.distribution_id,distribution_type:e.distribution_type,product_type:e.product_type,remark:"",task_index_id:e.task_index_id,user_duty:e.user_duty,user_id:e.user_id,user_name:e.user_name,work_days:e.work_days,start_date:e.start_date,end_date:e.end_date},this.$nextTick((function(){t.$refs["editBookForm"].clearValidate()}))},confirmEditBook:function(){var e=this;this.$refs["editBookForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(new Date(e.editBookForm.start_date).getTime()>new Date(e.editBookForm.end_date).getTime())e.$message.error("开始时间不能大于结束时间！");else{var r=e.editBookForm;r.user_name=e.$refs.usereditSelect2.selectedLabel,l["g"].update(r).then((function(t){if(Object(d["i"])(e,t),"success"===t.message){e.editBookVisible=!1;var r={task_index_id:e.mapInfor.currentIndexId};l["g"].select(r).then((function(t){e.booktableData=t.data})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))}}))},deleteBook:function(e){var t=this;this.$confirm("确认删除？").then((function(r){l["g"].delete({distribution_id:e.distribution_id}).then((function(e){if(Object(d["i"])(t,e),"success"===e.message){var r={task_index_id:t.mapInfor.currentIndexId};l["g"].select(r).then((function(e){t.booktableData=e.data})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))})).catch((function(e){}))},addErrorbook:function(e){var t=this;console.log(e),this.addBookErrorVisible=!0;var r={distribution_id:e.distribution_id};this.addErrorForm2.check_oper=e.user_name,this.addErrorForm2.user_id=e.user_id,this.addErrorForm2.task_id=e.task_index_id,l["c"].getTaskCheckByDisID(r).then((function(e){200===e.code?0===Object.keys(e.data).length?(t.addErrorForm2.check_id="",t.addErrorForm2.check_error1="",t.addErrorForm2.check_error2="",t.addErrorForm2.check_error3="",t.addErrorForm2.check_error4="",t.addErrorForm2.check_lost="",t.addErrorForm2.check_mylevel="",t.addErrorForm2.distribution_type="",t.addErrorForm2.distribution_id=""):t.$nextTick((function(){void 0===e.data.check_error1||null===e.data.check_error1?t.addErrorForm2.check_error1="":t.addErrorForm2.check_error1=e.data.check_error1,void 0===e.data.check_error2||null===e.data.check_error2?t.addErrorForm2.check_error2="":t.addErrorForm2.check_error2=e.data.check_error2,void 0===e.data.check_error3||null===e.data.check_error3?t.addErrorForm2.check_error3="":t.addErrorForm2.check_error3=e.data.check_error3,void 0===e.data.check_error4||null===e.data.check_error4?t.addErrorForm2.check_error4="":t.addErrorForm2.check_error4=e.data.check_error4,void 0===e.data.check_lost||null===e.data.check_lost?t.addErrorForm2.check_lost="":t.addErrorForm2.check_lost=e.data.check_lost,void 0===e.data.check_mylevel||null===e.data.check_mylevel?t.addErrorForm2.check_mylevel="":t.addErrorForm2.check_mylevel=e.data.check_mylevel,t.addErrorForm2.distribution_id=e.data.distribution_id,t.addErrorForm2.distribution_type=e.data.distribution_type?e.data.distribution_type:"",t.addErrorForm2.check_id=e.data.check_id})):(t.$message.error(e.message),t.$nextTick((function(){t.addErrorForm2.check_id="",t.addErrorForm2.check_error1="",t.addErrorForm2.check_error2="",t.addErrorForm2.check_error3="",t.addErrorForm2.check_error4="",t.addErrorForm2.check_lost="",t.addErrorForm2.check_mylevel="",t.addErrorForm2.distribution_type="",t.addErrorForm2.distribution_id=""})))}));for(var a=[],o=0,s=this.booktableData.length;o<s;o++)a.push(this.booktableData[o].distribution_type);this.sectionArr=a},confirmAddErrorBook:function(){var e=this;this.addErrorForm2.remark="";var t=this.addErrorForm2;t.check_error1=Number(this.addErrorForm2.check_error1),t.check_error2=Number(this.addErrorForm2.check_error2),t.check_error3=Number(this.addErrorForm2.check_error3),t.check_error4=Number(this.addErrorForm2.check_error4),l["c"].updataTaskCheckByDisID(this.addErrorForm2).then((function(t){"success"===t.message?e.$message.success("更新成功！"):e.$message.error("更新失败！"),e.addBookErrorVisible=!1})).catch((function(e){console.log(e)}))},submitApply:function(){var e=this;"bookapplycation"===this.form3Name?this.$refs["bookApplyForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.bookApplyForm.task_index_id=e.mapInfor.currentIndexId,s["a"].add(e.bookApplyForm).then((function(t){Object(d["i"])(e,t),e.detailVisible=!1})).catch((function(e){console.log(e)}))})):this.$refs["cipApplyForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.cipApplyForm.task_index_id=e.mapInfor.currentIndexId,s["a"].bookadd(e.cipApplyForm).then((function(t){Object(d["i"])(e,t),e.detailVisible=!1})).catch((function(e){console.log(e)}))}))},formatDate:function(e){if(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth(),o=t.getDate(),s=r+"-"+(a+1>=10?a+1:"0"+(a+1))+"-"+(o+1<10?"0"+o:o);return s}return""},submitThis:function(e){var t=this;console.log(e),this.submitVisible=!0,l["i"].getbyid({task_index_id:e.index_id}).then((function(e){t.submitForm={task_code:e.data.task_code,task_start_date:e.data.task_start_date,task_end_date:e.data.task_end_date,task_level:e.data.task_level,task_type_content:e.data.task_type_content,task_days:e.data.task_days,task_name:e.data.task_name,task_content:e.data.task_content,task_remark:e.data.task_remark},t.currentInforId=e.data.task_info_id,t.taskIndexid=e.data.task_index_id,t.currentTskClassId=e.data.task_class_id})).catch((function(e){console.log(e)})),this.$nextTick((function(){t.$refs["submitForm"].clearValidate()}))},confirmSubmit:function(){var e=this;this.$refs["submitForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;var r={task_index_id:e.taskIndexid,task_code:e.submitForm.task_code,task_start_date:e.submitForm.task_start_date,task_end_date:e.submitForm.task_end_date,task_level:e.submitForm.task_level,task_days:e.submitForm.task_days,task_name:e.submitForm.task_name,task_content:e.submitForm.task_content,task_remark:e.submitForm.task_remark,task_type:e.submitForm.task_type_content},a={task_class_id:e.currentTskClassId,task_code:e.submitForm.task_code,task_content:e.submitForm.task_content,task_days:e.submitForm.task_days,task_end_date:e.submitForm.task_end_date,task_index_id:e.taskIndexid,task_info_id:e.currentInforId,task_level:e.submitForm.task_level,task_name:e.submitForm.task_name,task_remark:e.submitForm.task_remark,task_start_date:e.submitForm.task_start_date,task_type_content:e.submitForm.task_type_content};l["i"].add(r,a).then((function(t){Object(d["i"])(e,t),e.fetchTableData(),e.submitVisible=!1,e.page.current=1})).catch((function(e){console.log(e)}))}))},sendThis:function(e){var t=this,r={class_id:e.task_class_id,index_id:e.index_id,task_name:e.task_name,task_state:"RWZJ",task_type:e.task_type};l["h"].updatestate(r).then((function(e){Object(d["i"])(t,e);var r=Object(d["e"])({page_number:t.page.current,page_size:10,task_year:t.searchForm.task_year,task_state:t.searchForm.status});s["a"].selectdepttask(r).then((function(e){200===e.code?(t.productionData=e.data.smallList,t.page.total=e.data.recordCount):t.$message.error("获取数据失败！")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},distributionTypeChange:function(e){var t=this;this.$nextTick((function(){t.addForm.user_duty="",t.addForm.user_id="",t.addForm.work_days="",t.addForm.start_date="",t.addForm.end_date=""}));var r={task_index_id:this.mapInfor.currentIndexId,distribution_type:e};l["g"].select(r).then((function(e){t.$nextTick((function(){t.haitutableData=e.data}))})).catch((function(e){console.log(e)}))},beforeDialogClose:function(){this.detailVisible=!1,this.search(),this.page.current=1}}},u=m,p=(r("6cc6"),r("4040"),r("5d22")),_=Object(p["a"])(u,a,o,!1,null,"24c6598c",null);t["default"]=_.exports},4040:function(e,t,r){"use strict";r("5818")},5818:function(e,t,r){},"69b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"6cc6":function(e,t,r){"use strict";r("17fa")},d91d:function(e,t,r){"use strict";var a=r("a86f"),o=r("69b0"),s=r("f417");r("c46f")("search",1,(function(e,t,r,i){return[function(r){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a):new RegExp(r)[t](String(a))},function(e){var t=i(r,e,this);if(t.done)return t.value;var l=a(e),d=String(this),c=l.lastIndex;o(c,0)||(l.lastIndex=0);var n=s(l,d);return o(l.lastIndex,c)||(l.lastIndex=c),null===n?-1:n.index}]}))}}]);