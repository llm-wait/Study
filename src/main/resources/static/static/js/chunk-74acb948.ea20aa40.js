(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74acb948"],{81634:function(e,t,d){"use strict";d.r(t);var a=function(){var e=this,t=e.$createElement,d=e._self._c||t;return d("div",{staticClass:"app-container"},[d("el-row",[d("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.data,"row-key":"dept_id","tree-props":{children:"childDepts"}}},[d("el-table-column",{attrs:{label:"部门名称",prop:"dept_name"}}),e._v(" "),d("el-table-column",{attrs:{label:"排序",prop:"dept_order"}}),e._v(" "),d("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),d("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"==t.row.dept_pid||t.row.dept_pid?d("el-link",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(d){return e.openAddDialog("add",t.row)}}},[e._v("新增")]):e._e(),e._v(" "),d("el-link",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(d){return e.openAddDialog("eidt",t.row)}}},[e._v("修改")]),e._v(" "),"-1"!==t.row.dept_pid?d("el-link",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(d){return e.handleDelete(t.row.dept_id,t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),d("el-dialog",{attrs:{title:"add"===e.dialog.add.type?"添加部门":"修改部门",visible:e.dialog.add.visible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.dialog.add,"visible",t)}}},[d("el-form",{ref:"addForm",attrs:{model:e.dialog.add.form,"label-width":"100px"}},[e.ui.showDeptPid?d("el-form-item",{attrs:{label:"上级部门",prop:"dept_pid",rules:[{required:!0,message:"不能为空"}]}},[d("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.dialog.add.options,"show-all-levels":!1,props:{label:"dept_name",value:"dept_id",children:"childDepts",checkStrictly:!0},clearable:""},model:{value:e.dialog.add.form.dept_pid,callback:function(t){e.$set(e.dialog.add.form,"dept_pid",t)},expression:"dialog.add.form.dept_pid"}})],1):e._e(),e._v(" "),d("el-form-item",{attrs:{label:"部门名称",prop:"dept_name",rules:[{required:!0,message:"不能为空"}]}},[d("el-input",{model:{value:e.dialog.add.form.dept_name,callback:function(t){e.$set(e.dialog.add.form,"dept_name",t)},expression:"dialog.add.form.dept_name"}})],1),e._v(" "),"-1"!==e.dialog.add.form.dept_pid?d("el-form-item",{attrs:{label:"显示排序",prop:"dept_order",rules:[{required:!0,message:"不能为空"},{type:"number",message:"必须为数字值"}]}},[d("el-input",{model:{value:e.dialog.add.form.dept_order,callback:function(t){e.$set(e.dialog.add.form,"dept_order",e._n(t))},expression:"dialog.add.form.dept_order"}})],1):e._e(),e._v(" "),"add"===e.dialog.add.type?d("el-form-item",{ref:"addWorkEvaluation",attrs:{prop:"flag"}},[d("el-checkbox",{attrs:{label:"是否参与作业考评"},model:{value:e.checkedAdd,callback:function(t){e.checkedAdd=t},expression:"checkedAdd"}})],1):e._e(),e._v(" "),"add"!=e.dialog.add.type?d("el-form-item",{ref:"eidtWorkEvaluation",attrs:{prop:"flag"}},[d("el-checkbox",{attrs:{label:"是否参与作业考评"},model:{value:e.checkedEdit,callback:function(t){e.checkedEdit=t},expression:"checkedEdit"}})],1):e._e(),e._v(" "),d("el-form-item",{attrs:{label:"备注"}},[d("el-input",{model:{value:e.dialog.add.form.remark,callback:function(t){e.$set(e.dialog.add.form,"remark",t)},expression:"dialog.add.form.remark"}})],1)],1),e._v(" "),d("div",{attrs:{slot:"footer"},slot:"footer"},[d("el-button",{attrs:{size:"small"},on:{click:e.closeAddStatioDialog}},[e._v("取消")]),e._v(" "),d("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)],1)},i=[],o=(d("ac67"),d("1bc7"),d("32ea"),d("28f8")),l=d("52c1"),r=d("6797"),n=d("857b");function s(e,t){var d=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),d.push.apply(d,a)}return d}function c(e){for(var t=1;t<arguments.length;t++){var d=null!=arguments[t]?arguments[t]:{};t%2?s(Object(d),!0).forEach((function(t){Object(o["a"])(e,t,d[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(d)):s(Object(d)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(d,t))}))}return e}var p={components:{},data:function(){return{ui:{showDeptPid:!1},searchData:{name:""},table:{data:[]},dialog:{add:{visible:!1,type:"add",options:[],form:{}}},checkedEdit:!1,checkedAdd:!0,addOrEdit:""}},computed:c({},Object(l["b"])(["userInfo"])),mounted:function(){this.getTableData()},methods:{getTableData:function(){var e=this,t={};this.userInfo.dept_id&&(t.dept_id=this.userInfo.dept_id),r["b"].getDeptTreeList(t).then((function(t){e.table.data=[t.data],e.dialog.add.options=[t.data]}))},openAddDialog:function(e,t){var d=this;Object(n["g"])(this,"addForm"),this.ui.showDeptPid=!1,"add"===e?(this.dialog.add.form={},this.checkedAdd=!0,this.addOrEdit="add",t?this.dialog.add.form.dept_pid=t.dept_id:this.ui.showDeptPid=!0):(this.addOrEdit="edit",0==t.flag?this.checkedEdit=!1:this.checkedEdit=!0,this.dialog.add.form=Object.assign({},t)),this.dialog.add.visible=!0,this.dialog.add.type=e,"-1"==t.dept_pid?this.$nextTick((function(){d.$refs.addWorkEvaluation&&(d.$refs.addWorkEvaluation.$el.style.display="block"),d.$refs.eidtWorkEvaluation&&(d.$refs.eidtWorkEvaluation.$el.style.display="none")})):this.$nextTick((function(){d.$refs.addWorkEvaluation&&(d.$refs.addWorkEvaluation.$el.style.display="block"),d.$refs.eidtWorkEvaluation&&(d.$refs.eidtWorkEvaluation.$el.style.display="block")}))},closeAddStatioDialog:function(){this.dialog.add.visible=!1},handleSubmit:function(){var e=this;if(!Object(n["j"])(this,"addForm"))return!1;var t=null;console.log(this.checkedAdd+"添加"),console.log(this.checkedEdit+"编辑"),"add"==this.addOrEdit?this.dialog.add.form.flag=1==this.checkedAdd?1:0:this.dialog.add.form.flag=1==this.checkedEdit?1:0;var d=Object.assign({},this.dialog.add.form);Array.isArray(d.dept_pid)&&(d.dept_pid=d.dept_pid.slice(-1)[0]),t="add"===this.dialog.add.type?this.handleAdd(d):this.handleEdit(d),t.then((function(t){Object(n["i"])(e,t),e.closeAddStatioDialog(),e.getTableData()}))},handleAdd:function(e){return r["b"].addDept(e)},handleEdit:function(e){return r["b"].updateDeptInfo(e)},handleDelete:function(e,t){var d=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["b"].deleteDeptByID({dept_id:e}).then((function(e){Object(n["i"])(d,e),d.getTableData()}))})).catch((function(){}))}}},u=p,f=d("5d22"),h=Object(f["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports}}]);